<span id="upgtop"></span>

<h1>osCommerce Online Merchant v2.3.3.3</h1>

<p>osCommerce Online Merchant v2.3.3.3 is a general maintenance release focusing on improving core features and introducing new security check modules.</p>

<p>This release is in preparation of and building up to v2.3.4.</p>

<div class="visible-print">
  <p>This document can be found online at:</p>

  <p><a href="http://library.oscommerce.com/Online&amp;en&amp;oscom_2_3&amp;release_notes&amp;v2_3_3_3">http://library.oscommerce.com/Online&amp;en&amp;oscom_2_3&amp;release_notes&amp;v2_3_3_3</a></p>
</div>

<h2>Changelog <small>Changes from v2.3.3.2</small></h2>

<p>The following changes have been applied:</p>

<table class="table table-hover">
  <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>Bug</th>
      <th>Severity</th>
      <th>Committer</th>
    </tr>
  </thead>
  <tbody>
    <tr class="success">
      <td><a href="#upg1">Database Query Logging</a> (2 files)</td>
      <td>Improve database query error logging.</td>
      <td><a href="http://forums.oscommerce.com/tracker/issue-626-v2332-object-of-class-mysqli-result-could-not-be-converted-to-string/">626</a></td>
      <td>Low</td>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=2" target="_blank">Harald</a></td>
    </tr>
    <tr class="success">
      <td><a href="#upg2">Administration Tool Navigation Menu</a> (1 file)</td>
      <td>Dynamically load navigation menu boxes.</td>
      <td></td>
      <td>Low</td>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=2" target="_blank">Harald</a></td>
    </tr>
    <tr class="success">
      <td><a href="#upg3">HTTPS -&gt; HTTP Browser Alert</a> (2 files)</td>
      <td>Have forms posting from a HTTPS to HTTP page post to a HTTPS version to prevent the browser (Firefox) from alerting the user of being directed to an insecure page.</td>
      <td><a href="http://forums.oscommerce.com/tracker/issue-606-links-shows-security-warning/">606</a></td>
      <td>Low</td>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=2" target="_blank">Harald</a></td>
    </tr>
    <tr class="success">
      <td><a href="#upg4">Currencies</a> (1 file)</td>
      <td>Force decimal places value to an integer value.</td>
      <td></td>
      <td>Low</td>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=2" target="_blank">Harald</a></td>
    </tr>
    <tr class="success">
      <td><a href="#upg5">Action Recorder</a> (5 files)</td>
      <td>When expiring logged entries, don't pass the database connection link to tep_db_affected_rows().</td>
      <td><a href="http://forums.oscommerce.com/tracker/issue-629-2332-action-recorder-bug/">629</a></td>
      <td>Low</td>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=2" target="_blank">Harald</a></td>
    </tr>
    <tr class="success">
      <td><a href="#upg6">UTF-8 Updates</a> (4 files)</td>
      <td>Set the MySQL character set to UTF-8 after a connection is made.<br />Set the English locale to en_US.UTF-8, en_US.UTF8, enu_usa.</td>
      <td></td>
      <td>Low</td>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=2" target="_blank">Harald</a></td>
    </tr>
    <tr class="success">
      <td><a href="#upg7">Date of Birth</a> (3 files)</td>
      <td>Take the Configuration -&gt; Minimum Values -&gt; Date of Birth value into consideration to make the date of birth field optional.</td>
      <td></td>
      <td>Low</td>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=2" target="_blank">Harald</a></td>
    </tr>
    <tr class="success">
      <td><a href="#upg8">Administration Tool Automatic HTTP Authentication Login</a> (1 file)</td>
      <td>Don't use the HTTP Authentication values when the login form is being submitted.<br />Don't show an invalid administrator notice when an automatic HTTP Authentication fails.<br />Don't record failed automatic HTTP Authentication logins.</td>
      <td></td>
      <td>Low</td>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=2" target="_blank">Harald</a></td>
    </tr>
    <tr class="success">
      <td><a href="#upg9">Canonical Manufacturer ID</a> (1 file)</td>
      <td>Force the Manufacturer ID to an integer value.</td>
      <td></td>
      <td>Low</td>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=69" target="_blank">Gary</a></td>
    </tr>
    <tr class="success">
      <td><a href="#upg10">Administration Tool -&gt; Who's Online</a> (3 files)</td>
      <td>Remove the session_decode() functionality and show shopping cart contents only for logged in customers.<br />When regenerating a session ID, update the session ID in the who's online database table to prevent duplicate entries.</td>
      <td></td>
      <td>Low</td>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=2" target="_blank">Harald</a></td>
    </tr>
    <tr class="success">
      <td><a href="#upg11">MailChimp 360</a> (1 file)</td>
      <td>Fix module title.</td>
      <td></td>
      <td>Low</td>
      <td>Foxp2</td>
    </tr>
    <tr class="success">
      <td><a href="#upg12">Administration Tool -&gt; Security Checks</a> (4 files)</td>
      <td>Introduce a new security checks page that shows the results of the security checks and extended security checks modules.</td>
      <td></td>
      <td>Low</td>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=2" target="_blank">Harald</a></td>
    </tr>
    <tr class="success">
      <td><a href="#upg13">Administration Tool -&gt; Database Tables</a> (4 files)</td>
      <td>Introduce a new database tables page to show information and perform actions on database tables.</td>
      <td></td>
      <td>Low</td>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=2" target="_blank">Harald</a></td>
    </tr>
    <tr class="success">
      <td><a href="#upg14">Version Update</a> (1 file)</td>
      <td>Update version to v2.3.3.3.</td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>

<h3>New Modules</h3>

<p>The following modules have been added:</p>

<table class="pretty">
  <thead>
    <tr>
      <th>Security Check Modules</th>
      <th>Description</th>
      <th>Committer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="#upg15">Extended Last Run Check</a></td>
      <td>Check if the extended security check modules were run in the last 30 days.</td>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=2" target="_blank">Harald</a></td>
    </tr>
  </tbody>
</table>

<table class="pretty">
  <thead>
    <tr>
      <th>Extended Security Check Modules</th>
      <th>Description</th>
      <th>Committer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="#upg16">admin/backups/ Directory Listing</a></td>
      <td>Check if the admin/backups/ directory is publicly accessible (directory listing or index.html page).</td>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=2" target="_blank">Harald</a></td>
    </tr>
    <tr>
      <td><a href="#upg17">admin/backups/ File Accessibility</a></td>
      <td>Check if a backup in admin/backups/ is publicly accessible.</td>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=2" target="_blank">Harald</a></td>
    </tr>
    <tr>
      <td><a href="#upg18">Administration Tool HTTP Authentication</a></td>
      <td>Check if a HTTP Authentication layer is active on the Administration Tool.</td>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=2" target="_blank">Harald</a></td>
    </tr>
    <tr>
      <td><a href="#upg19">ext/ Directory Listing</a></td>
      <td>Check if the ext/ directory is publicly accessible (directory listing or index.html page).</td>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=2" target="_blank">Harald</a></td>
    </tr>
    <tr>
      <td><a href="#upg20">MySQL UTF-8 Database Tables</a></td>
      <td>Check if a database table exists that does not have a utf8_unicode_ci character set.</td>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=2" target="_blank">Harald</a></td>
    </tr>
    <tr>
      <td><a href="#upg21">Version Check</a></td>
      <td>Check if a version update check was performed in the last 30 days.</td>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=2" target="_blank">Harald</a></td>
    </tr>
  </tbody>
</table>

<div class="info">The Extended Security Check modules are located in a new directory in admin/includes/modules/security_check/extended/.</div>

<h3>API Changes</h3>

<p>The following API changes have been applied:</p>

<table class="pretty">
  <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>New MySQLi Compatibility Functions</td>
      <td>mysqli_connect_errno(), mysqli_connect_error(), mysqli_set_charset().</td>
    </tr>
    <tr>
      <td>Language Locale</td>
      <td>The locale defined in the main language file has changed from a LC_TIME setting to LC_ALL, and from a ISO_8859-1 character set to UTF-8.</td>
    </tr>
    <tr>
      <td>Who's Online</td>
      <td>The shopping cart contents of guests are no longer shown on the Who's Online page due to the removal of the potentially session conflicting session_decode() function.</td>
    </tr>
    <tr>
      <td>Who's Online</td>
      <td>New tep_whos_online_update_session_id() function to update the customers session ID in the whos_online database table when their session ID has been regenerated. This prevents duplicate entries showing in the Who's Online listing.</td>
    </tr>
    <tr>
      <td>Administration Tool Navigation Menu</td>
      <td>The Administration Tool navigation menu now loads the boxes dynamically so column_left.php no longer needs to be edited to add a navigation menu link. The navigation links are now sorted alphabetically.</td>
    </tr>
    <tr>
      <td>Administration Tool Extended Security Check Modules</td>
      <td>Extended Security Check modules are located in a new admin/includes/modules/security_check/extended/ directory and are not loaded with the normal security check modules on the Dashboard page due to being more resource intensive. Instead they are loaded on a new Tools -&gt; Security Checks page together with the normal security check modules. Both module types can now have a $has_doc class property to link to the Library Wiki documentation site.</td>
  </tbody>
</table>

<h3>Language Definitions</h3>

<p>The following language definitions have been modified:</p>

<table class="pretty">
  <thead>
    <tr>
      <th>Definitions</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>[admin] modules/boxes/tools_database_tables.php</strong><br /><br />
          MODULES_ADMIN_MENU_TOOLS_DATABASE_TABLES</td>
      <td><br /><br />New</td>
    </tr>
    <tr>
      <td><strong>[admin] modules/boxes/tools_security_checks.php</strong><br /><br />
          MODULES_ADMIN_MENU_TOOLS_SECURITY_CHECKS</td>
      <td><br /><br />New</td>
    </tr>
    <tr>
      <td><strong>[admin] modules/security_check/extended/admin_backup_directory_listing.php</strong><br /><br />
          MODULE_SECURITY_CHECK_EXTENDED_ADMIN_BACKUP_DIRECTORY_LISTING_TITLE<br />
          MODULE_SECURITY_CHECK_EXTENDED_ADMIN_BACKUP_DIRECTORY_LISTING_HTTP_200</td>
      <td><br /><br />New<br />
          New</td>
    </tr>
    <tr>
      <td><strong>[admin] modules/security_check/extended/admin_backup_file.php</strong><br /><br />
          MODULE_SECURITY_CHECK_EXTENDED_ADMIN_BACKUP_FILE_TITLE<br />
          MODULE_SECURITY_CHECK_EXTENDED_ADMIN_BACKUP_FILE_HTTP_200</td>
      <td><br /><br />New<br />
          New</td>
    </tr>
    <tr>
      <td><strong>[admin] modules/security_check/extended/admin_http_authentication.php</strong><br /><br />
          MODULE_SECURITY_CHECK_EXTENDED_ADMIN_HTTP_AUTHENTICATION_TITLE<br />
          MODULE_SECURITY_CHECK_EXTENDED_ADMIN_HTTP_AUTHENTICATION_ERROR</td>
      <td><br /><br />New<br />
          New</td>
    </tr>
    <tr>
      <td><strong>[admin] modules/security_check/extended/ext_directory_listing.php</strong><br /><br />
          MODULE_SECURITY_CHECK_EXTENDED_EXT_DIRECTORY_LISTING_TITLE<br />
          MODULE_SECURITY_CHECK_EXTENDED_EXT_DIRECTORY_LISTING_HTTP_200</td>
      <td><br /><br />New<br />
          New</td>
    </tr>
    <tr>
      <td><strong>[admin] modules/security_check/extended/mysql_utf8.php</strong><br /><br />
          MODULE_SECURITY_CHECK_EXTENDED_MYSQL_UTF8_TITLE<br />
          MODULE_SECURITY_CHECK_EXTENDED_MYSQL_UTF8_ERROR</td>
      <td><br /><br />New<br />
          New</td>
    </tr>
    <tr>
      <td><strong>[admin] modules/security_check/extended/version_check.php</strong><br /><br />
          MODULE_SECURITY_CHECK_EXTENDED_VERSION_CHECK_TITLE<br />
          MODULE_SECURITY_CHECK_EXTENDED_VERSION_CHECK_ERROR</td>
      <td><br /><br />New<br />
          New</td>
    </tr>
    <tr>
      <td><strong>[admin] modules/security_check/extended_last_run.php</strong><br /><br />
          MODULE_SECURITY_CHECK_EXTENDED_LAST_RUN_OLD</td>
      <td><br /><br />New</td>
    </tr>
    <tr>
      <td><strong>[admin] database_tables.php</strong><br /><br />
          HEADING_TITLE<br />
          TABLE_HEADING_TABLE<br />
          TABLE_HEADING_ROWS<br />
          TABLE_HEADING_SIZE<br />
          TABLE_HEADING_ENGINE<br />
          TABLE_HEADING_COLLATION<br />
          TABLE_HEADING_MSG_TYPE<br />
          TABLE_HEADING_MSG<br />
          ACTION_CHECK_TABLES<br />
          ACTION_ANALYZE_TABLES<br />
          ACTION_OPTIMIZE_TABLES<br />
          ACTION_REPAIR_TABLES<br />
          ACTION_UTF8_CONVERSION<br />
          BUTTON_ACTION_GO</td>
      <td><br /><br />New<br />
          New<br />
          New<br />
          New<br />
          New<br />
          New<br />
          New<br />
          New<br />
          New<br />
          New<br />
          New<br />
          New<br />
          New<br />
          New</td>
    </tr>
    <tr>
      <td><strong>[admin] security_checks.php</strong><br /><br />
          HEADING_TITLE<br />
          TABLE_HEADING_TITLE<br />
          TABLE_HEADING_MODULE<br />
          TABLE_HEADING_INFO</td>
      <td><br /><br />New<br />
          New<br />
          New<br />
          New</td>
    </tr>
  </tbody>
</table>

<h3>Modified Files</h3>

<p>Files that have been modified in this release include:</p>

<table class="pretty">
  <thead>
    <tr>
      <th>Modified Files</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>admin/includes/functions/database.php</td>
    </tr>
    <tr>
      <td>admin/includes/languages/english.php</td>
    </tr>
    <tr>
      <td>admin/includes/column_left.php</td>
    </tr>
    <tr>
      <td>admin/action_recorder.php</td>
    </tr>
    <tr>
      <td>admin/customers.php</td>
    </tr>
    <tr>
      <td>admin/login.php</td>
    </tr>
    <tr>
      <td>admin/whos_online.php</td>
    </tr>
    <tr>
      <td>includes/classes/currencies.php</td>
    </tr>
    <tr>
      <td>includes/functions/database.php</td>
    </tr>
    <tr>
      <td>includes/functions/sessions.php</td>
    </tr>
    <tr>
      <td>includes/functions/whos_online.php</td>
    </tr>
    <tr>
      <td>includes/languages/english.php</td>
    </tr>
    <tr>
      <td>includes/modules/action_recorder/ar_admin_login.php</td>
    </tr>
    <tr>
      <td>includes/modules/action_recorder/ar_contact_us.php</td>
    </tr>
    <tr>
      <td>includes/modules/action_recorder/ar_reset_password.php</td>
    </tr>
    <tr>
      <td>includes/modules/action_recorder/ar_tell_a_friend.php</td>
    </tr>
    <tr>
      <td>includes/modules/boxes/bm_manufacturers.php</td>
    </tr>
    <tr>
      <td>includes/modules/boxes/bm_search.php</td>
    </tr>
    <tr>
      <td>includes/modules/header_tags/ht_canonical.php</td>
    </tr>
    <tr>
      <td>includes/modules/header_tags/ht_mailchimp_360.php</td>
    </tr>
    <tr>
      <td>includes/version.php</td>
    </tr>
    <tr>
      <td>account_edit.php</td>
    </tr>
    <tr>
      <td>create_account.php</td>
    </tr>
  </tbody>
</table>

<h3>New Files</h3>

<p>Files that have been added to this release include:</p>

<table class="pretty">
  <thead>
    <tr>
      <th>New Files</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>admin/includes/boxes/tools_database_tables.php</td>
    </tr>
    <tr>
      <td>admin/includes/boxes/tools_security_checks.php</td>
    </tr>
    <tr>
      <td>admin/includes/languages/english/database_tables.php</td>
    </tr>
    <tr>
      <td>admin/includes/languages/english/modules/boxes/tools_database_tables.php</td>
    </tr>
    <tr>
      <td>admin/includes/languages/english/modules/boxes/tools_security_checks.php</td>
    </tr>
    <tr>
      <td>admin/includes/languages/english/modules/security_check/extended/admin_backup_directory_listing.php</td>
    </tr>
    <tr>
      <td>admin/includes/languages/english/modules/security_check/extended/admin_backup_file.php</td>
    </tr>
    <tr>
      <td>admin/includes/languages/english/modules/security_check/extended/admin_http_authentication.php</td>
    </tr>
    <tr>
      <td>admin/includes/languages/english/modules/security_check/extended/ext_directory_listing.php</td>
    </tr>
    <tr>
      <td>admin/includes/languages/english/modules/security_check/extended/mysql_utf8.php</td>
    </tr>
    <tr>
      <td>admin/includes/languages/english/modules/security_check/extended/version_check.php</td>
    </tr>
    <tr>
      <td>admin/includes/languages/english/modules/security_check/extended_last_run.php</td>
    </tr>
    <tr>
      <td>admin/includes/languages/english/security_checks.php</td>
    </tr>
    <tr>
      <td>admin/includes/modules/security_check/extended/admin_backup_directory_listing.php</td>
    </tr>
    <tr>
      <td>admin/includes/modules/security_check/extended/admin_backup_file.php</td>
    </tr>
    <tr>
      <td>admin/includes/modules/security_check/extended/admin_http_authentication.php</td>
    </tr>
    <tr>
      <td>admin/includes/modules/security_check/extended/ext_directory_listing.php</td>
    </tr>
    <tr>
      <td>admin/includes/modules/security_check/extended/mysql_utf8.php</td>
    </tr>
    <tr>
      <td>admin/includes/modules/security_check/extended/version_check.php</td>
    </tr>
    <tr>
      <td>admin/includes/modules/security_check/extended_last_run.php</td>
    </tr>
    <tr>
      <td>admin/database_tables.php</td>
    </tr>
    <tr>
      <td>admin/security_checks.php</td>
    </tr>
  </tbody>
</table>

<h2>File Changes</h2>

<span id="upg1"></span>

<h3 class="notoc">Database Query Logging (2 files)</h3>

<p><i class="icon-file"></i> <strong>admin/includes/functions/database.php</strong></p>

<p>change tep_db_error() from:</p>

{code}
function tep_db_error($query, $errno, $error) { 
  die('<font color="#000000"><strong>' . $errno . ' - ' . $error . '<br /><br />' . $query . '<br /><br /><small><font color="#ff0000">[TEP STOP]</font></small><br /><br /></strong></font>');
}
{code}

<p>to:</p>

{code}
function tep_db_error($query, $errno, $error) {
  global $logger;

  if (defined('STORE_DB_TRANSACTIONS') && (STORE_DB_TRANSACTIONS == 'true')) {
    $logger->write('[' . $errno . '] ' . $error, 'ERROR');
  }

  die('<font color="#000000"><strong>' . $errno . ' - ' . $error . '<br /><br />' . $query . '<br /><br /><small><font color="#ff0000">[TEP STOP]</font></small><br /><br /></strong></font>');
}
{code}

<p>change tep_db_query() from:</p>

{code}
function tep_db_query($query, $link = 'db_link') {
  global $$link, $logger;

  if (defined('STORE_DB_TRANSACTIONS') && (STORE_DB_TRANSACTIONS == 'true')) {
    if (!is_object($logger)) $logger = new logger;
    $logger->write($query, 'QUERY');
  }

  $result = mysqli_query($$link, $query) or tep_db_error($query, mysqli_errno($$link), mysqli_error($$link));

  if (defined('STORE_DB_TRANSACTIONS') && (STORE_DB_TRANSACTIONS == 'true')) {
    if (mysqli_error($$link)) $logger->write(mysqli_error($llink), 'ERROR');
  }

  return $result;
}
{code}

<p>to:</p>

{code}
function tep_db_query($query, $link = 'db_link') {
  global $$link, $logger;

  if (defined('STORE_DB_TRANSACTIONS') && (STORE_DB_TRANSACTIONS == 'true')) {
    if (!is_object($logger)) $logger = new logger;
    $logger->write($query, 'QUERY');
  }

  $result = mysqli_query($$link, $query) or tep_db_error($query, mysqli_errno($$link), mysqli_error($$link));

  return $result;
}
{code}

<p><i class="icon-file"></i> <strong>includes/functions/database.php</strong></p>

<p>change tep_db_error() from:</p>

{code}
function tep_db_error($query, $errno, $error) { 
  die('<font color="#000000"><strong>' . $errno . ' - ' . $error . '<br /><br />' . $query . '<br /><br /><small><font color="#ff0000">[TEP STOP]</font></small><br /><br /></strong></font>');
}
{code}

<p>to:</p>

{code}
function tep_db_error($query, $errno, $error) { 
  if (defined('STORE_DB_TRANSACTIONS') && (STORE_DB_TRANSACTIONS == 'true')) {
    error_log('ERROR: [' . $errno . '] ' . $error . "\n", 3, STORE_PAGE_PARSE_TIME_LOG);
  }

  die('<font color="#000000"><strong>' . $errno . ' - ' . $error . '<br /><br />' . $query . '<br /><br /><small><font color="#ff0000">[TEP STOP]</font></small><br /><br /></strong></font>');
}
{code}

<p>change tep_db_query() from:</p>

{code}
function tep_db_query($query, $link = 'db_link') {
  global $$link;

  if (defined('STORE_DB_TRANSACTIONS') && (STORE_DB_TRANSACTIONS == 'true')) {
    error_log('QUERY ' . $query . "\n", 3, STORE_PAGE_PARSE_TIME_LOG);
  }

  $result = mysqli_query($$link, $query) or tep_db_error($query, mysqli_errno($$link), mysqli_error($$link));

  if (defined('STORE_DB_TRANSACTIONS') && (STORE_DB_TRANSACTIONS == 'true')) {
     $result_error = mysqli_error($$link);
     error_log('RESULT ' . $result . ' ' . $result_error . "\n", 3, STORE_PAGE_PARSE_TIME_LOG);
  }

  return $result;
}
{code}

<p>to:</p>

{code}
function tep_db_query($query, $link = 'db_link') {
  global $$link;

  if (defined('STORE_DB_TRANSACTIONS') && (STORE_DB_TRANSACTIONS == 'true')) {
    error_log('QUERY: ' . $query . "\n", 3, STORE_PAGE_PARSE_TIME_LOG);
  }

  $result = mysqli_query($$link, $query) or tep_db_error($query, mysqli_errno($$link), mysqli_error($$link));

  return $result;
}
{code}

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/a4b14dd688eaddd20332e01540dca3e75227ed58" target="_blank">View online at GitHub</a></p>

<span id="upg2"></span>

<h3 class="notoc">Administration Tool Navigation Menu (1 file)</h3>

<p><i class="icon-file"></i> <strong>admin/includes/column_left.php</strong></p>

<p>around line 16, change from:</p>

{code}
include(DIR_WS_BOXES . 'configuration.php');
include(DIR_WS_BOXES . 'catalog.php');
include(DIR_WS_BOXES . 'modules.php');
include(DIR_WS_BOXES . 'customers.php');
include(DIR_WS_BOXES . 'taxes.php');
include(DIR_WS_BOXES . 'localization.php');
include(DIR_WS_BOXES . 'reports.php');
include(DIR_WS_BOXES . 'tools.php');
{code}

<p>to:</p>

{code}
if ($dir = @dir(DIR_FS_ADMIN . 'includes/boxes')) {
  $files = array();

  while ($file = $dir->read()) {
    if (!is_dir($dir->path . '/' . $file)) {
      if (substr($file, strrpos($file, '.')) == '.php') {
        $files[] = $file;
      }
    }
  }

  $dir->close();

  natcasesort($files);

  foreach ( $files as $file ) {
    if ( file_exists(DIR_FS_ADMIN . 'includes/languages/' . $language . '/modules/boxes/' . $file) ) {
      include(DIR_FS_ADMIN . 'includes/languages/' . $language . '/modules/boxes/' . $file);
    }

    include($dir->path . '/' . $file);
  }
}

function tep_sort_admin_boxes($a, $b) {
  return strcasecmp($a['heading'], $b['heading']);
}

usort($cl_box_groups, 'tep_sort_admin_boxes');

function tep_sort_admin_boxes_links($a, $b) {
  return strcasecmp($a['title'], $b['title']);
}

foreach ( $cl_box_groups as &$group ) {
  usort($group['apps'], 'tep_sort_admin_boxes_links');
}
{code}

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/8fd022a085e988e44b85f0b0fdeaf3849a707789" target="_blank">View online at GitHub</a></p>

<span id="upg3"></span>

<h3 class="notoc">HTTPS -&gt; HTTP Browser Alert (2 files)</h3>

<p><i class="icon-file"></i> <strong>includes/modules/boxes/bm_manufacturers.php</strong></p>

<p>around line 34, change from:</p>

{code}
global $HTTP_GET_VARS, $oscTemplate;
{code}

<p>to:</p>

{code}
global $HTTP_GET_VARS, $request_type, $oscTemplate;
{code}

<p>around line 65, change from:</p>

{code}
$content = tep_draw_form('manufacturers', tep_href_link(FILENAME_DEFAULT, '', 'NONSSL', false), 'get') .
{code}

<p>to:</p>

{code}
$content = tep_draw_form('manufacturers', tep_href_link(FILENAME_DEFAULT, '', $request_type, false), 'get') .
{code}

<p><i class="icon-file"></i> <strong>includes/modules/boxes/bm_search.php</strong></p>

<p>around line 34, change from:</p>

{code}
global $oscTemplate;
{code}

<p>to:</p>

{code}
global $request_type, $oscTemplate;
{code}

<p>around line 39, change from:</p>

{code}
'    ' . tep_draw_form('quick_find', tep_href_link(FILENAME_ADVANCED_SEARCH_RESULT, '', 'NONSSL', false), 'get') .
{code}

<p>to:</p>

{code}
'    ' . tep_draw_form('quick_find', tep_href_link(FILENAME_ADVANCED_SEARCH_RESULT, '', $request_type, false), 'get') .
{code}

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/40fc8e27c97f3f8fccfd67e9516804def7b443a4" target="_blank">View online at GitHub</a></p>

<span id="upg4"></span>

<h3 class="notoc">Currencies (1 file)</h3>

<p><i class="icon-file"></i> <strong>includes/classes/currencies.php</strong></p>

<p>around line 29, change from:</p>

{code}
'decimal_places' => $currencies['decimal_places'],
{code}

<p>to:</p>

{code}
'decimal_places' => (int)$currencies['decimal_places'],
{code}

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/5d879ce7929d1f57626bd88fb5fd37b49fead077" target="_blank">View online at GitHub</a></p>

<span id="upg5"></span>

<h3 class="notoc">Action Recorder (5 files)</h3>

<p><i class="icon-file"></i> <strong>admin/action_recorder.php</strong></p>

<p>around line 67, change from:</p>

{code}
$expired_entries += tep_db_affected_rows($db_link);
{code}

<p>to:</p>

{code}
$expired_entries += tep_db_affected_rows();
{code}

<p><i class="icon-file"></i> <strong>includes/modules/action_recorder/ar_admin_login.php</strong><br />
<i class="icon-file"></i> <strong>includes/modules/action_recorder/ar_contact_us.php</strong><br />
<i class="icon-file"></i> <strong>includes/modules/action_recorder/ar_reset_password.php</strong><br />
<i class="icon-file"></i> <strong>includes/modules/action_recorder/ar_tell_a_friend.php</strong></p>

<p>in those 4 module files, change expireEntries() from:</p>

{code}
function expireEntries() {
  global $db_link;

  tep_db_query("delete from " . TABLE_ACTION_RECORDER . " where module = '" . $this->code . "' and date_added < date_sub(now(), interval " . (int)$this->minutes  . " minute)");

  return tep_db_affected_rows($db_link);
}
{code}

<p>to:</p>

{code}
function expireEntries() {
  tep_db_query("delete from " . TABLE_ACTION_RECORDER . " where module = '" . $this->code . "' and date_added < date_sub(now(), interval " . (int)$this->minutes  . " minute)");

  return tep_db_affected_rows();
}
{code}

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/e55fd8862faba4472d9dd63b472410942dda6e84" target="_blank">View online at GitHub</a></p>

<span id="upg6"></span>

<h3 class="notoc">UTF-8 Updates (4 files)</h3>

<p><i class="icon-file"></i> <strong>admin/includes/functions/database.php</strong><br />
<i class="icon-file"></i> <strong>includes/functions/database.php</strong></p>

<p>in those 2 files, change tep_db_connect() from:</p>

{code}
function tep_db_connect($server = DB_SERVER, $username = DB_SERVER_USERNAME, $password = DB_SERVER_PASSWORD, $database = DB_DATABASE, $link = 'db_link') {
  global $$link;

  if (USE_PCONNECT == 'true') {
    $server = 'p:' . $server;
  }

  $$link = mysqli_connect($server, $username, $password, $database);

  return $$link;
}
{code}

<p>to:</p>

{code}
function tep_db_connect($server = DB_SERVER, $username = DB_SERVER_USERNAME, $password = DB_SERVER_PASSWORD, $database = DB_DATABASE, $link = 'db_link') {
  global $$link;

  if (USE_PCONNECT == 'true') {
    $server = 'p:' . $server;
  }

  $$link = mysqli_connect($server, $username, $password, $database);

  if ( !mysqli_connect_errno() ) {
    mysqli_set_charset($$link, 'utf8');
  } 

  return $$link;
}
{code}

<p>after the mysqli_connect() function (defined around line 178), add:</p>

{code}
function mysqli_connect_errno($link = null) {
  return mysql_errno($link);
}

function mysqli_connect_error($link = null) {
  return mysql_error($link);
}

function mysqli_set_charset($link, $charset) {
  if ( function_exists('mysql_set_charset') ) {
    return mysql_set_charset($charset, $link);
  }
}
{code}

<p><i class="icon-file"></i> <strong>admin/includes/languages/english.php</strong><br />
<i class="icon-file"></i> <strong>includes/languages/english.php</strong></p>

<p>in those 2 files, around lines 17 and 19, change from:</p>

{code}
setlocale(LC_TIME, 'en_US.ISO_8859-1');
{code}

<p>to:</p>

{code}
setlocale(LC_ALL, array('en_US.UTF-8', 'en_US.UTF8', 'enu_usa'));
{code}

<div class="note">
  <p>Please also make the same change to the main catalog and admin language files for other languages you have installed. Example language UTF-8 locales are:</p>

  <ul>
    <li><strong>Arabic:</strong> ar_SA.UTF-8, ar_SA.UTF8, ara_sau</li>
    <li><strong>Chinese (Simplified):</strong> zh_CN.UTF-8, zh_CN.UTF8, chs_chn</li>
    <li><strong>Chinese (Traditional):</strong> zh_TW.UTF-8, zh_TW.UTF8, cht_twn</li>
    <li><strong>Dutch:</strong> nl_NL.UTF-8, nl_NL.UTF8, nld_nld</li>
    <li><strong>French (Canada):</strong> fr_CA.UTF-8, fr_CA.UTF8, frc_can</li>
    <li><strong>French (France):</strong> fr_FR.UTF-8, fr_FR.UTF8, fra_fra</li>
    <li><strong>German:</strong> de_DE.UTF-8, de_DE.UTF8, deu_deu</li>
    <li><strong>Greek:</strong> el_GR.UTF-8, el_GR.UTF8, ell_grc</li>
    <li><strong>Hebrew:</strong> iw_IL.UTF-8, iw_IL.UTF8, heb_isr</li>
    <li><strong>Hindi:</strong> hi_IN.UTF-8, hi_IN.UTF8, hin_ind</li>
    <li><strong>Italian:</strong> it_IT.UTF-8, it_IT.UTF8, ita_ita</li>
    <li><strong>Japanese:</strong> ja_JP.UTF-8, ja_JP.UTF8, jpn_jpn</li>
    <li><strong>Korean:</strong> ko_KR.UTF-8, ko_KR.UTF8, kor_kor</li>
    <li><strong>Portuguese:</strong> pt_BR.UTF-8, pt_BR.UTF8, ptb_bra</li>
    <li><strong>Russian:</strong> ru_RU.UTF-8, ru_RU.UTF8, rus_rus</li>
    <li><strong>Spanish:</strong> es_ES.UTF-8, es_ES.UTF8, esp_esp</li>
    <li><strong>Swedish:</strong> sv_SE.UTF-8, sv_SE.UTF8, sve_swe</li>
    <li><strong>Turkish:</strong> tr_TR.UTF-8, tr_TR.UTF8, trk_tur</li>
  </ul>
</div>

<div class="info">Please also apply the Administration Tool -&gt; Database Tables changeset described in this release guide to be able to see the character sets of your database tables and convert non-UTF8 tables to utf8_unicode_ci.</div>

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/2bb8549aaa5f071d372e71adbc31f591c36d3615" target="_blank">View online at GitHub</a></p>

<span id="upg7"></span>

<h3 class="notoc">Date of Birth (3 files)</h3>

<p><i class="icon-file"></i> <strong>admin/customers.php</strong></p>

<p>around line 60, change from:</p>

{code}
if (checkdate(substr(tep_date_raw($customers_dob), 4, 2), substr(tep_date_raw($customers_dob), 6, 2), substr(tep_date_raw($customers_dob), 0, 4))) {
{code}

<p>to:</p>

{code}
if ((strlen($customers_dob) >= ENTRY_DOB_MIN_LENGTH) && ((is_numeric(tep_date_raw($customers_dob)) && @checkdate(substr(tep_date_raw($customers_dob), 4, 2), substr(tep_date_raw($customers_dob), 6, 2), substr(tep_date_raw($customers_dob), 0, 4))) || empty($customers_dob))) {
{code}

<p><i class="icon-file"></i> <strong>account_edit.php</strong></p>

<p>around line 55, change from:</p>

{code}
if ((is_numeric(tep_date_raw($dob)) == false) || (@checkdate(substr(tep_date_raw($dob), 4, 2), substr(tep_date_raw($dob), 6, 2), substr(tep_date_raw($dob), 0, 4)) == false)) {
{code}

<p>to:</p>

{code}
if ((strlen($dob) < ENTRY_DOB_MIN_LENGTH) || (!empty($dob) && (!is_numeric(tep_date_raw($dob)) || !@checkdate(substr(tep_date_raw($dob), 4, 2), substr(tep_date_raw($dob), 6, 2), substr(tep_date_raw($dob), 0, 4))))) {
{code}

<p><i class="icon-file"></i> <strong>create_account.php</strong></p>

<p>around line 80, change from:</p>

{code}
if ((is_numeric(tep_date_raw($dob)) == false) || (@checkdate(substr(tep_date_raw($dob), 4, 2), substr(tep_date_raw($dob), 6, 2), substr(tep_date_raw($dob), 0, 4)) == false)) {
{code}

<p>to:</p>

{code}
if ((strlen($dob) < ENTRY_DOB_MIN_LENGTH) || (!empty($dob) && (!is_numeric(tep_date_raw($dob)) || !@checkdate(substr(tep_date_raw($dob), 4, 2), substr(tep_date_raw($dob), 6, 2), substr(tep_date_raw($dob), 0, 4))))) {
{code}

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/e64165eff35f0d8df6a4ca4cbf1b8d231ade5747" target="_blank">View online at GitHub</a></p>

<span id="upg8"></span>

<h3 class="notoc">Administration Tool Automatic HTTP Authentication Login (1 file)</h3>

<p><i class="icon-file"></i> <strong>admin/login.php</strong></p>

<p>around line 28, change from:</p>

{code}
if (tep_session_is_registered('redirect_origin') && isset($redirect_origin['auth_user'])) {
{code}

<p>to:</p>

{code}
if (tep_session_is_registered('redirect_origin') && isset($redirect_origin['auth_user']) && !isset($HTTP_POST_VARS['username'])) {
{code}

<p>around line 75, change from:</p>

{code}
$messageStack->add(ERROR_INVALID_ADMINISTRATOR, 'error');
{code}

<p>to:</p>

{code}
if (isset($HTTP_POST_VARS['username'])) {
  $messageStack->add(ERROR_INVALID_ADMINISTRATOR, 'error');
}
{code}

<p>around line 80, change from:</p>

{code}
$actionRecorder->record(false);
{code}

<p>to:</p>

{code}
if (isset($HTTP_POST_VARS['username'])) {
  $actionRecorder->record(false);
}
{code}

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/f79ba4cdf7aa87a1e7f657989a662ce460f686f2" target="_blank">View online at GitHub</a></p>

<span id="upg9"></span>

<h3 class="notoc">Canonical Manufacturer ID (1 file)</h3>

<p><i class="icon-file"></i> <strong>includes/modules/header_tags/ht_canonical.php</strong></p>

<p>around line 40, change from:</p>

{code}
$oscTemplate->addBlock('<link rel="canonical" href="' . tep_href_link(FILENAME_DEFAULT, 'manufacturers_id=' . $HTTP_GET_VARS['manufacturers_id'], 'NONSSL', false) . '" />' . "\n", $this->group);
{code}

<p>to:</p>

{code}
$oscTemplate->addBlock('<link rel="canonical" href="' . tep_href_link(FILENAME_DEFAULT, 'manufacturers_id=' . (int)$HTTP_GET_VARS['manufacturers_id'], 'NONSSL', false) . '" />' . "\n", $this->group);
{code}

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/8fecd2b7873d0040898f2d5b9c4b960e7194958c" target="_blank">View online at GitHub</a></p>

<span id="upg10"></span>

<h3 class="notoc">Administration Tool -&gt; Who's Online (3 files)</h3>

<p><i class="icon-file"></i> <strong>admin/whos_online.php</strong></p>

<div class="note">It is safe to skip this file if your version contains customizations or modifications from an Add-On.</div>

<p>around line 53, change from:</p>

{code}
$info = $whos_online['session_id'];
{code}

<p>to:</p>

{code}
$info = new ObjectInfo($whos_online);
{code}

<p>around line 56, change from:</p>

{code}
if ($whos_online['session_id'] == $info) {
{code}

<p>to:</p>

{code}
if (isset($info) && ($whos_online['session_id'] == $info->session_id)) {
{code}

<p>around line 68, change from:</p>

{code}
<td class="dataTableContent"><?php if (preg_match('/^(.*)' . tep_session_name() . '=[a-f,0-9]+[&]*(.*)/i', $whos_online['last_page_url'], $array)) { echo $array[1] . $array[2]; } else { echo $whos_online['last_page_url']; } ?>&nbsp;</td>
{code}

<p>to:</p>

{code}
<td class="dataTableContent"><?php if (preg_match('/^(.*)osCsid=[A-Z0-9,-]+[&]*(.*)/i', $whos_online['last_page_url'], $array)) { echo $array[1] . $array[2]; } else { echo $whos_online['last_page_url']; } ?>&nbsp;</td>
{code}

<p>around line 81, change from:</p>

{code}
if (isset($info)) {
  $heading[] = array('text' => '<strong>' . TABLE_HEADING_SHOPPING_CART . '</strong>');

  if (STORE_SESSIONS == 'mysql') {
    $session_data = tep_db_query("select value from " . TABLE_SESSIONS . " WHERE sesskey = '" . $info . "'");
    $session_data = tep_db_fetch_array($session_data);
    $session_data = trim($session_data['value']);
  } else {
    if ( (file_exists(tep_session_save_path() . '/sess_' . $info)) && (filesize(tep_session_save_path() . '/sess_' . $info) > 0) ) {
      $session_data = file(tep_session_save_path() . '/sess_' . $info);
      $session_data = trim(implode('', $session_data));
    }
  }

  if ($length = strlen($session_data)) {
    $start_id = strpos($session_data, 'customer_id|s');
    $start_cart = strpos($session_data, 'cart|O');
    $start_currency = strpos($session_data, 'currency|s');
    $start_country = strpos($session_data, 'customer_country_id|s');
    $start_zone = strpos($session_data, 'customer_zone_id|s');

    for ($i=$start_cart; $i<$length; $i++) {
      if ($session_data[$i] == '{') {
        if (isset($tag)) {
          $tag++;
        } else {
          $tag = 1;
        }
      } elseif ($session_data[$i] == '}') {
        $tag--;
      } elseif ( (isset($tag)) && ($tag < 1) ) {
        break;
      }
    }

    $session_data_id = substr($session_data, $start_id, (strpos($session_data, ';', $start_id) - $start_id + 1));
    $session_data_cart = substr($session_data, $start_cart, $i);
    $session_data_currency = substr($session_data, $start_currency, (strpos($session_data, ';', $start_currency) - $start_currency + 1));
    $session_data_country = substr($session_data, $start_country, (strpos($session_data, ';', $start_country) - $start_country + 1));
    $session_data_zone = substr($session_data, $start_zone, (strpos($session_data, ';', $start_zone) - $start_zone + 1));

    session_decode($session_data_id);
    session_decode($session_data_currency);
    session_decode($session_data_country);
    session_decode($session_data_zone);
    session_decode($session_data_cart);

    if (isset($cart) && is_object($cart)) {
      $products = $cart->get_products();
      for ($i = 0, $n = sizeof($products); $i < $n; $i++) {
        $contents[] = array('text' => $products[$i]['quantity'] . ' x ' . $products[$i]['name']);
      }

      if (sizeof($products) > 0) {
        $contents[] = array('text' => tep_draw_separator('pixel_black.gif', '100%', '1'));
        $contents[] = array('align' => 'right', 'text'  => TEXT_SHOPPING_CART_SUBTOTAL . ' ' . $currencies->format($cart->show_total(), true, $currency));
      } else {
        $contents[] = array('text' => '&nbsp;');
      }
    }
  }
}
{code}

<p>to:</p>

{code}
if (isset($info)) {
  $heading[] = array('text' => '<strong>' . TABLE_HEADING_SHOPPING_CART . '</strong>');

  if ( $info->customer_id > 0 ) {
    $products_query = tep_db_query("select cb.customers_basket_quantity, cb.products_id, pd.products_name from " . TABLE_CUSTOMERS_BASKET . " cb, " . TABLE_PRODUCTS_DESCRIPTION . " pd where cb.customers_id = '" . (int)$info->customer_id . "' and cb.products_id = pd.products_id and pd.language_id = '" . (int)$languages_id . "'");

    if ( tep_db_num_rows($products_query) ) {
      $shoppingCart = new shoppingCart();

      while ( $products = tep_db_fetch_array($products_query) ) {
        $contents[] = array('text' => $products['customers_basket_quantity'] . ' x ' . $products['products_name']);

        $attributes = array();

        if ( strpos($products['products_id'], '{') !== false ) {
          $combos = array();
          preg_match_all('/(\{[0-9]+\}[0-9]+){1}/', $products['products_id'], $combos);

          foreach ( $combos[0] as $combo ) {
            $att = array();
            preg_match('/\{([0-9]+)\}([0-9]+)/', $combo, $att);

            $attributes[$att[1]] = $att[2];
          }
        }

        $shoppingCart->add_cart(tep_get_prid($products['products_id']), $products['customers_basket_quantity'], $attributes);
      }

      $contents[] = array('text' => tep_draw_separator('pixel_black.gif', '100%', '1'));
      $contents[] = array('align' => 'right', 'text'  => TEXT_SHOPPING_CART_SUBTOTAL . ' ' . $currencies->format($shoppingCart->show_total()));
    } else {
      $contents[] = array('text' => '&nbsp;');
    }
  } else {
    $contents[] = array('text' => 'N/A');
  }
}
{code}

<p><i class="icon-file"></i> <strong>includes/functions/sessions.php</strong></p>

<p>change tep_session_recreate() from:</p>

{code}
function tep_session_recreate() {
  global $SID;

  if (PHP_VERSION >= 5.1) {
    session_regenerate_id(true);

    if (!empty($SID)) {
      $SID = tep_session_name() . '=' . tep_session_id();
    }
  }
}
{code}

<p>to:</p>

{code}
function tep_session_recreate() {
  global $SID;

  if (PHP_VERSION >= 5.1) {
    $old_id = session_id();

    session_regenerate_id(true);

    if (!empty($SID)) {
      $SID = tep_session_name() . '=' . tep_session_id();
    }

    tep_whos_online_update_session_id($old_id, tep_session_id());
  }
}
{code}

<p><i class="icon-file"></i> <strong>includes/functions/whos_online.php</strong></p>

<p>around line 38, change from:</p>

{code}
$stored_customer_query = tep_db_query("select count(*) as count from " . TABLE_WHOS_ONLINE . " where session_id = '" . tep_db_input($wo_session_id) . "'");
$stored_customer = tep_db_fetch_array($stored_customer_query);

if ($stored_customer['count'] > 0) {
{code}

<p>to:</p>

{code}
$stored_customer_query = tep_db_query("select session_id from " . TABLE_WHOS_ONLINE . " where session_id = '" . tep_db_input($wo_session_id) . "' limit 1");

if ( tep_db_num_rows($stored_customer_query) > 0 ) {
{code}

<p>after tep_update_whos_online(), add:</p>

{code}
function tep_whos_online_update_session_id($old_id, $new_id) {
  tep_db_query("update " . TABLE_WHOS_ONLINE . " set session_id = '" . tep_db_input($new_id) . "' where session_id = '" . tep_db_input($old_id) . "'");
}
{code}

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/07fa0551a33a87fb454f65308f94e9638fa48e1b" target="_blank">View online at GitHub</a></p>

<span id="upg11"></span>

<h3 class="notoc">MailChimp 360 (1 file)</h3>

<p><i class="icon-file"></i> <strong>includes/modules/header_tags/ht_mailchimp_360.php</strong></p>

<p>around line 54, change from:</p>

{code}
tep_db_query("insert into " . TABLE_CONFIGURATION . " (configuration_title, configuration_key, configuration_value, configuration_description, configuration_group_id, sort_order, set_function, date_added) values ('Enable Category Title Module', 'MODULE_HEADER_TAGS_MAILCHIMP_360_STATUS', 'True', 'Do you want to allow category titles to be added to the page title?', '6', '1', 'tep_cfg_select_option(array(\'True\', \'False\'), ', now())");
{code}

<p>to:</p>

{code}
tep_db_query("insert into " . TABLE_CONFIGURATION . " (configuration_title, configuration_key, configuration_value, configuration_description, configuration_group_id, sort_order, set_function, date_added) values ('Enable MailChimp 360 Module', 'MODULE_HEADER_TAGS_MAILCHIMP_360_STATUS', 'True', 'Do you want to activate this module in your shop?', '6', '1', 'tep_cfg_select_option(array(\'True\', \'False\'), ', now())");
{code}

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/3d28527afb774684cdad256c294ce6a24605ee6b" target="_blank">View online at GitHub</a></p>

<span id="upg12"></span>

<h3 class="notoc">Administration Tool -&gt; Security Checks (4 files)</h3>

<p>Copy the following files to their respective directories:</p>

<p>
  <i class="icon-file"></i> <strong>admin/includes/boxes/tools_security_checks.php</strong><br />
  <i class="icon-file"></i> <strong>admin/includes/languages/english/modules/boxes/tools_security_checks.php</strong><br />
  <i class="icon-file"></i> <strong>admin/includes/languages/english/security_checks.php</strong><br />
  <i class="icon-file"></i> <strong>admin/security_checks.php</strong>
</p>

<div class="note">Please also copy and update the language definition file to the other languages you have installed.</div>

<div class="info">This changeset should be performed after the Administration Tool Navigation Menu changeset for the link to appear automatically in the Administration Tool -&gt; Tools menu.</div>

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/20608d6c7fb7fb964de1030770a0f5b4aca3426c" target="_blank">View online at GitHub</a></p>

<span id="upg13"></span>

<h3 class="notoc">Administration Tool -&gt; Database Tables (4 files)</h3>

<p>Copy the following files to their respective directories:</p>

<p>
  <i class="icon-file"></i> <strong>admin/includes/boxes/tools_database_tables.php</strong><br />
  <i class="icon-file"></i> <strong>admin/includes/languages/english/modules/boxes/tools_database_tables.php</strong><br />
  <i class="icon-file"></i> <strong>admin/includes/languages/english/database_tables.php</strong><br />
  <i class="icon-file"></i> <strong>admin/database_tables.php</strong>
</p>

<div class="note">Please also copy and update the language definition file to the other languages you have installed.</div>

<div class="info">This changeset should be performed after the Administration Tool Navigation Menu changeset for the link to appear automatically in the Administration Tool -&gt; Tools menu.</div>

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/48c04975b1f224a1cd7f5ba5f715e54e53ab0b46" target="_blank">View online at GitHub</a></p>

<span id="upg14"></span>

<h3 class="notoc">Version Update (1 file)</h3>

<p><i class="icon-file"></i> <strong>includes/version.php</strong></p>

<p>change line 1 from:</p>

{code}
2.3.3.2
{code}

<p>to:</p>

{code}
2.3.3.3
{code}

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/292ce5af6b0d0a84a9162767958e543655cbc209" target="_blank">View online at GitHub</a></p>

<span id="upg15"></span>

<h3 class="notoc">Extended Last Run Check</h3>

<p>Copy the following files to their respective directories:</p>

<p>
  <i class="icon-file"></i> <strong>admin/includes/languages/english/modules/security_check/extended_last_run.php</strong><br />
  <i class="icon-file"></i> <strong>admin/includes/modules/security_check/extended_last_run.php</strong>
</p>

<div class="note">Please also copy and update the language definition file to the other languages you have installed.</div>

<div class="info">After this changeset is applied, the module can be found in Administration Tool -&gt; Tools -&gt; Security Checks.</div>

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/20608d6c7fb7fb964de1030770a0f5b4aca3426c" target="_blank">View online at GitHub</a></p>

<span id="upg16"></span>

<h3 class="notoc">admin/backups/ Directory Listing</h3>

<p>Copy the following files to their respective directories:</p>

<p>
  <i class="icon-file"></i> <strong>admin/includes/languages/english/modules/security_check/extended/admin_backup_directory_listing.php</strong><br />
  <i class="icon-file"></i> <strong>admin/includes/modules/security_check/extended/admin_backup_directory_listing.php</strong>
</p>

<div class="note">Please also copy and update the language definition file to the other languages you have installed.</div>

<div class="info">After this changeset is applied, the module can be found in Administration Tool -&gt; Tools -&gt; Security Checks.</div>

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/20608d6c7fb7fb964de1030770a0f5b4aca3426c" target="_blank">View online at GitHub</a></p>

<span id="upg17"></span>

<h3 class="notoc">admin/backups/ File Accessibility</h3>

<p>Copy the following files to their respective directories:</p>

<p>
  <i class="icon-file"></i> <strong>admin/includes/languages/english/modules/security_check/extended/admin_backup_file.php</strong><br />
  <i class="icon-file"></i> <strong>admin/includes/modules/security_check/extended/admin_backup_file.php</strong>
</p>

<div class="note">Please also copy and update the language definition file to the other languages you have installed.</div>

<div class="info">After this changeset is applied, the module can be found in Administration Tool -&gt; Tools -&gt; Security Checks.</div>

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/20608d6c7fb7fb964de1030770a0f5b4aca3426c" target="_blank">View online at GitHub</a></p>

<span id="upg18"></span>

<h3 class="notoc">Administration Tool HTTP Authentication</h3>

<p>Copy the following files to their respective directories:</p>

<p>
  <i class="icon-file"></i> <strong>admin/includes/languages/english/modules/security_check/extended/admin_http_authentication.php</strong><br />
  <i class="icon-file"></i> <strong>admin/includes/modules/security_check/extended/admin_http_authentication.php</strong>
</p>

<div class="note">Please also copy and update the language definition file to the other languages you have installed.</div>

<div class="info">After this changeset is applied, the module can be found in Administration Tool -&gt; Tools -&gt; Security Checks.</div>

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/20608d6c7fb7fb964de1030770a0f5b4aca3426c" target="_blank">View online at GitHub</a></p>

<span id="upg19"></span>

<h3 class="notoc">ext/ Directory Listing</h3>

<p>Copy the following files to their respective directories:</p>

<p>
  <i class="icon-file"></i> <strong>admin/includes/languages/english/modules/security_check/extended/ext_directory_listing.php</strong><br />
  <i class="icon-file"></i> <strong>admin/includes/modules/security_check/extended/ext_directory_listing.php</strong>
</p>

<div class="note">Please also copy and update the language definition file to the other languages you have installed.</div>

<div class="info">After this changeset is applied, the module can be found in Administration Tool -&gt; Tools -&gt; Security Checks.</div>

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/20608d6c7fb7fb964de1030770a0f5b4aca3426c" target="_blank">View online at GitHub</a></p>

<span id="upg20"></span>

<h3 class="notoc">MySQL UTF-8 Database Tables</h3>

<p>Copy the following files to their respective directories:</p>

<p>
  <i class="icon-file"></i> <strong>admin/includes/languages/english/modules/security_check/extended/mysql_utf8.php</strong><br />
  <i class="icon-file"></i> <strong>admin/includes/modules/security_check/extended/mysql_utf8.php</strong>
</p>

<div class="note">Please also copy and update the language definition file to the other languages you have installed.</div>

<div class="info">After this changeset is applied, the module can be found in Administration Tool -&gt; Tools -&gt; Security Checks.</div>

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/20608d6c7fb7fb964de1030770a0f5b4aca3426c" target="_blank">View online at GitHub</a></p>

<span id="upg21"></span>

<h3 class="notoc">Version Check</h3>

<p>Copy the following files to their respective directories:</p>

<p>
  <i class="icon-file"></i> <strong>admin/includes/languages/english/modules/security_check/extended/version_check.php</strong><br />
  <i class="icon-file"></i> <strong>admin/includes/modules/security_check/extended/version_check.php</strong>
</p>

<div class="note">Please also copy and update the language definition file to the other languages you have installed.</div>

<div class="info">After this changeset is applied, the module can be found in Administration Tool -&gt; Tools -&gt; Security Checks.</div>

<p class="pull-right"><a href="#upgtop"><i class="icon-circle-arrow-up"></i></a></p>
<p><a href="https://github.com/osCommerce/oscommerce2/commit/20608d6c7fb7fb964de1030770a0f5b4aca3426c" target="_blank">View online at GitHub</a></p>

<h2>Thank You!</h2>

<p>We'd like to thank the community for their feedback on our releases. In addition, we thank the following people who participated in the development of this release.</p>

<table class="pretty">
  <thead>
    <tr>
      <th>Bug Reporters</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=323143" target="_blank">ABS0lute</a></td>
    </tr>
    <tr>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=316891" target="_blank">Bob Terveuren</a></td>
    </tr>
    <tr>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=61933" target="_blank">D-BlooD</a></td>
    </tr>
    <tr>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=303521" target="_blank">dculley</a></td>
    </tr>
    <tr>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=17188" target="_blank">Jack_mcs</a></td>
    </tr>
    <tr>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=290961" target="_blank">mvanderhoff</a></td>
    </tr>
    <tr>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=114908" target="_blank">Scottyj</a></td>
    </tr>
    <tr>
      <td><a href="https://github.com/skleiner" target="_blank">skleiner</a></td>
    </tr>
    <tr>
      <td><a href="http://forums.oscommerce.com/index.php?showuser=324007" target="_blank">t.man</a></td>
    </tr>
  </tbody>
</table>

<h2>Reference</h2>

<p>A full list of source code changes can be seen at:</p>

<p><a href="https://github.com/osCommerce/oscommerce2/compare/v2.3.3.2...upgrade2333" target="_blank">https://github.com/osCommerce/oscommerce2/compare/v2.3.3.2...upgrade2333</a></p>
